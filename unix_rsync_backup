# backup from unix / linux to FreeNAS
wget https://raw.githubusercontent.com/rubo77/rsync-homedir-excludes/master/rsync-homedir-excludes.txt -O /var/tmp/ignorelist

# perform Rsync
rsync -aP --exclude-from=/var/tmp/ignorelist /home/$USER/ /media/$USER/linuxbackup/home/




# download to `rsync-homedir-local.txt`
wget https://raw.githubusercontent.com/djhejna/rsync-homedir-excludes/master/rsync-homedir-excludes.txt -O rsync-homedir-local.txt
# or clone and copy to `rsync-homedir-local.txt`
git clone https://github.com/rubo77/rsync-homedir-excludes
cd rsync-homedir-excludes
cp rsync-homedir-excludes.txt rsync-homedir-local.txt

# edit the file rsync-homedir-local.txt to your needs
# nano rsync-homedir-local.txt
emacs -nw rsync-homedir-local.txt

# define a Backup directory (with trailing slash!)
# some examples:
# BACKUPDIR=/media/workspace/home/$USER/
# BACKUPDIR=/media/$USER/linuxbackup/home/$USER/
# BACKUPDIR=/media/$USER/USBSTICK/backup/home/$USER/
BACKUPDIR=$FREENAS_BUDIR
BACKUPMACH=$FREENAS_IP

# first specify the "-n" parameter so rsync will simulate its operation. You should use this before you start:
rsync -naP --exclude-from=rsync-homedir-local.txt /home/$USER/ root@$BACKUPMACH:$BACKUPDIR

# check for permission denied errors in your homedir:
rsync -naP --exclude-from=rsync-homedir-local.txt /home/$USER/ root@$BACKUPMACH:$BACKUPDIR|grep denied

# if it is all fine, actually perform your backup:
rsync -aP --exclude-from=rsync-homedir-local.txt /home/$USER/ root@$BACKUPMACH:$BACKUPDIR
